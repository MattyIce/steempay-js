let steempay=function(){let config={api_url:"https://steempay.io",pub_key:"STM6LoQ2tr436jpLAefP8YyAyDkZCc8XB15DCeA5DA5eYND8kVvXc"};function api(url,data){return new Promise((resolve,reject)=>{null!=data&&void 0!=data||(data={}),data.v=(new Date).getTime(),_player&&(data.token=_player.token,data.username=_player.name);var xhr=new XMLHttpRequest;xhr.open("GET",config.api_url+url+"?"+function(object){var encodedString="";for(var prop in object)object.hasOwnProperty(prop)&&(encodedString.length>0&&(encodedString+="&"),encodedString+=encodeURI(prop+"="+object[prop]));return encodedString}(data)),xhr.onload=function(){200===xhr.status?resolve(function(json){try{return JSON.parse(json)}catch(err){return console.log("Error trying to parse JSON: "+json),null}}(xhr.responseText)):reject("Request failed.  Returned status of "+xhr.status)},xhr.send()})}return{api:api,start_purchase:async function(account,amount,price_currency,payment_currency,data){return new Promise(async(resolve,reject)=>{try{let result=await api("/start_payment",{account:account,amount:amount,price_currency:price_currency,payment_currency:payment_currency,data:data});result||reject(),result.success?resolve(result.payment):reject(result.error)}catch(err){reject(err)}})},payment_methods:function(){let methods=["steemconnect","active_key"];return window.steem_keychain&&methods.unshift("steem_keychain"),"ontouchstart"in window||methods.push("vessel"),methods}}}();